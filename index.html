<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <title>hello-wasm example</title>
  </head>
  <body>
    <textarea id="input" placeholder="Type here"></textarea>
    <div id="output">
      Loading...
    </div>

    <script>
      // For playing around in the REPL
      let typ;
      import("/pkg/typ_js.js").then(pkg => typ = pkg)
    </script>

    <script type="module">
      import init, { TypJs } from "./pkg/typ_js.js";

      const input = document.getElementById("input")
      const output = document.getElementById("output")

      init().then(() => {
        const typ = TypJs.new()
        output.innerHTML = typ.svg()

        input.addEventListener("input", () => {
          typ.set("main.typ", input.value)
          output.innerHTML = typ.svg()
        })
      });
    </script>
  </body>
</html>
